<script>
	var projects = [];
	<% @canines = Canine.where(gender: "1")%>
	<%@canines.each do |canine|%>
	projects.push({ value: '<%=canine.name%>',label: '<%=canine.name%>', desc: '<%=canine.id%>'})
	<%end%>
	<%@canines.each do |canine|%>
	projects.push({ value: '<%=canine.lof%>',label: '<%=canine.lof%>', desc: '<%=canine.id%>'})
	<%end%>

	$(function() {

		$( "#merge_father_lof" ).autocomplete({
			minLength: 0,
			source: projects,
			focus: function( event, ui ) {
				$( "#merge_father_lof" ).val( ui.item.label );
				return false;
			},
			select: function( event, ui ) {
				$( "#merge_father_lof" ).val( ui.item.label );
				$( "#merge_canine_id_1" ).val( ui.item.desc );
				return false;
			}
		})
		.autocomplete( "instance" )._renderItem = function( ul, item ) {
			return $( "<li>" )
			.append( "<a>" + item.label + "</a>" )
			.appendTo( ul );
		};
	});

	var projects_2 = [];
	<% @canines = Canine.where(gender: "0")%>
	<%@canines.each do |canine|%>
	projects_2.push({ value: '<%=canine.name%>',label: '<%=canine.name%>', desc: '<%=canine.id%>'})
	<%end%>
	<%@canines.each do |canine|%>
	projects_2.push({ value: '<%=canine.lof%>',label: '<%=canine.lof%>', desc: '<%=canine.id%>'})
	<%end%>

	$(function() {

		$( "#merge_mother_lof" ).autocomplete({
			minLength: 0,
			source: projects_2,
			focus: function( event, ui ) {
				$( "#merge_mother_lof" ).val( ui.item.label );
				return false;
			},
			select: function( event, ui ) {
				$( "#merge_mother_lof" ).val( ui.item.label );
				$( "#merge_canine_id_2" ).val( ui.item.desc );
				return false;
			}
		})
		.autocomplete( "instance" )._renderItem = function( ul, item ) {
			return $( "<li>" )
			.append( "<a>" + item.label + "</a>" )
			.appendTo( ul );
		};
	});
</script>
<div class="row">
	<div class="col-lg-12">
		<div class="form-group container m40px">
			<h3> Realizar Cruce</h3>
	    	<hr>
	    	<%- if params[:merge]%>
		    	<%= form_for :merge , url: admin_enviar_cruce_path, method: :post do |f| %>
					<label>Nombre Primer Ejemplar</label>
					<%= f.text_field :father_lof, class: 'form-control' %>
      				<%= f.hidden_field :canine_id_1%>
					  <br>
					<label>Nombre Segundo Ejemplar</label>
					<%= f.text_field :mother_lof, class: 'form-control' %>
      				<%= f.hidden_field :canine_id_2%>
					<%= f.submit :class =>"btn btn-primary btn-block" %>
				<%end%>
				<hr>
			<%end%>
		</div>
		<%- if params[:status]%>
			<div class="row">
				 <%= render :partial => "admin/canines/metter_cruce1"%>
				 <%= render :partial => "admin/canines/metter_cruce2"%>
			</div>
		<%end%>
	</div>
</div>
